generator client {
  provider = "prisma-client-js"
}
datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}
model User {
  id   String @id @default(uuid())
  name String
  buyers Buyer[] @relation("owner")
}
model Buyer {
  id String @id @default(uuid())
  fullName String
  email String?
  phone String
  city City
  propertyType PropertyType
  bhk BHK?
  purpose Purpose
  budgetMin Int?
  budgetMax Int?
  timeline Timeline
  source Source
  status Status @default(New)
  notes String? @db.Text
  tags String[]
  ownerId String
  owner User @relation(fields: [ownerId], references: [id], name: "owner")
  updatedAt DateTime @updatedAt
  histories BuyerHistory[]
}
model BuyerHistory {
  id String @id @default(uuid())
  buyerId String
  changedBy String
  changedAt DateTime @default(now())
  diff Json
  buyer Buyer @relation(fields: [buyerId], references: [id])
}
enum City {
  Chandigarh
  Mohali
  Zirakpur
  Panchkula
  Other
}
enum PropertyType {
  Apartment
  Villa
  Plot
  Office
  Retail
}
enum BHK {
  One
  Two
  Three
  Four
  Studio
}
enum Purpose {
  Buy
  Rent
}
enum Timeline {
  _0_3m
  _3_6m
  _gt_6m
  Exploring
}
enum Source {
  Website
  Referral
  Walk_in
  Call
  Other
}
enum Status {
  New
  Qualified
  Contacted
  Visited
  Negotiation
  Converted
  Dropped
}
